import{options as e,Component as _}from"/@npm/preact";const t=e.__e;e.__e=(e,_)=>{_.__c&&_.__c.__d&&(_.__c.__d=!1),t&&t(e,_)};const o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout;e.debounceRendering=e=>{o(()=>{try{e()}catch(_){throw e.__r=0,_}})};const c=new WeakMap,n=new WeakMap,getMappedVnode=e=>n.has(e)?getMappedVnode(n.get(e)):e,s=e.vnode;e.vnode=e=>{if(e&&"function"==typeof e.type){const _=c.get(e.type);_?_.push(e):c.set(e.type,[e]);const t=getMappedVnode(e.type);e.type=t,e.__c&&(e.__c.constructor=t)}s&&s(e)};const f=e.unmount;e.unmount=e=>{const _=(e||{}).type;if("function"==typeof _&&c.has(_)){const t=c.get(_);if(t){const _=t.indexOf(e);-1!==_&&t.splice(_,1)}}f&&f(e)};const r=new WeakMap,computeKey=e=>{let _,t=e.key;try{_=e.getCustomHooks()}catch(o){return e.forceReset=!0,t}for(let c=0;c<_.length;c++){const o=_[c];if("function"!=typeof o)return e.forceReset=!0,t;const n=r.get(o);if(void 0===n)continue;const s=computeKey(n);n.forceReset&&(e.forceReset=!0),t+="\n---\n"+s}return t};let i=new Map,p=[];self.__PREFRESH__={getSignature:e=>r.get(e),register:(e,_)=>{if(i.has(_)){const t=i.get(_);t!==e&&(p.push([t,e]),i.set(_,e))}else i.set(_,e);r.has(e)||r.set(e,{getCustomHooks:()=>[],type:e})},getPendingUpdates:()=>p,flush:()=>{p=[]},replaceComponent:function(e,t,o){const s=c.get(e);s&&(c.delete(e),c.set(t,s),n.set(e,t),p=p.filter(_=>_[0]!==e),s.forEach(c=>{if(c.type=t,c.__c){c.__c.constructor=c.type;try{if(c.__c instanceof e){const e=c.__c,_=new t(c.__c.props,c.__c.context);c.__c=_;for(let t in e){const o=typeof e[t];t in _?"function"!==o&&typeof _[t]===o&&("object"===o&&null!=_[t]&&_[t].constructor===e[t].constructor?Object.assign(_[t],e[t]):_[t]=e[t]):_[t]=e[t]}}}catch(n){c.__c.constructor=t}o?(c.__c.__H&&c.__c.__H.__&&c.__c.__H.__.length&&c.__c.__H.__.forEach(e=>{if(e.__c&&"function"==typeof e.__c)e.__c();else if(e.__H&&e.__&&3===Object.keys(e).length){const _=Object.keys(e).find(e=>"__H"!==e&&"__"!==e);_&&"function"==typeof e[_]&&e[_]()}}),c.__c.__H={__:[],__h:[]}):c.__c.__H&&c.__c.__H.__&&c.__c.__H.__.length&&(c.__c.__H.__.forEach(e=>{if(e.__c&&"function"==typeof e.__c)e.__c();else if(e.__H&&e.__&&3===Object.keys(e).length){const _=Object.keys(e).find(e=>"__H"!==e&&"__"!==e);_&&"function"==typeof e[_]&&e[_]()}}),c.__c.__H.__.forEach(e=>{e.__H&&Array.isArray(e.__H)&&(e.__H=void 0)})),(c.__e&&!document.contains(c.__e)||!c.__e&&!c.__k)&&location.reload(),_.prototype.forceUpdate.call(c.__c)}}))},sign:function(e,_,t,o,c){if(e){let n=r.get(e);if("begin"===c)return r.set(e,{type:e,key:_,forceReset:t,getCustomHooks:o||(()=>[])}),"needsHooks";"needsHooks"===c&&(n.fullKey=computeKey(n))}},computeKey};